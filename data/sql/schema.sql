CREATE TABLE job (id BIGINT AUTO_INCREMENT, params text, hash VARCHAR(255) NOT NULL UNIQUE, status VARCHAR(255) NOT NULL, error_message text, accessed_at DATETIME NOT NULL, process_started_at DATETIME, process_finished_at DATETIME, type VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE job (id BIGINT AUTO_INCREMENT, params text, hash VARCHAR(255) NOT NULL UNIQUE, status VARCHAR(255) NOT NULL, error_message text, accessed_at DATETIME NOT NULL, process_started_at DATETIME, process_finished_at DATETIME, type VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX job_type_idx (type), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE result (id BIGINT AUTO_INCREMENT, path VARCHAR(255) NOT NULL, job_id bigint(20), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX job_id_idx (job_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE result ADD CONSTRAINT result_job_id_job_id FOREIGN KEY (job_id) REFERENCES job(id) ON DELETE CASCADE;
